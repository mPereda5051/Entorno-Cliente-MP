<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>

</head>

<body>

</body>
<p id="output"></p>

<script>
    /*
1. (Objetos: creación, recorrido y propiedades) Vamos a simular un objeto llamado
“alumno” con las siguientes propiedades:
• edad: por defecto 18.
• admin: por defecto false.
• stats: un objeto con las propiedades:
o posts: número de publicaciones (por defecto 0)
o followers: número de seguidores (por defecto 0)
Ahora vamos a probar el objeto. Todos los apartados que pidan mostrar un resultado
será en un párrafo de la página con id “output”.
• Incrementa el número de posts en 2 y de followers en 3.
• Cambia el permiso de administrador a “true” y muestra el resultado en el párrafo.
• Quita la propiedad de administrador.
• Crea una función fuera del objeto que recibe un objeto como parámetro y recorre
todas sus propiedades del objeto y muestra el resultado en el párrafo. Si se
encuentra alguna propiedad que sea un objeto como “stats”, recórrelo y muestra
todas sus propiedades. Si alguna propiedad es del tipo “función” no se mostrará.
    */
    // Definición del objeto alumno
    let alumno = {
        edad: 18,
        admin: false,
        stats: {
            posts: 0,
            followers: 0
        },
        /*
    (Objetos: referencia this y operador ?) Seguimos con el objeto “alumno” de los
    ejercicios anteriores. El objeto tendrá el siguiente método:
    • incrementarStats(tipo, n): Suma “n” veces el número de posts o followers según
    el valor primer parámetro “tipo”. Se realizarán las siguientes validaciones:
    o Se comprobará con el operador “?” si el objeto “stats” existe y en este
    caso intentaremos acceder a la propiedad recibida en el parámetro “tipo”.
    Solo se realizará la suma si la variable “tipo” tiene los valores “posts” o
    “followers”.
    o Se comprobará si el parámetro “n” es numérico.
    o Si no se cumplen las condiciones anteriores, se ignorará la suma sin
    mostrar mensaje de error.
    */
        incrementarStats(tipo, n) {
            if (this.stats?.[tipo] != undefined) {
                if (typeof n == "number" && !isNaN(n)) {
                    this.stats[tipo] += n;
                }
            }
        }
    };

    // La función que muestra un objeto en el párrafo de la página
    function mostrarObjeto(obj) {
        // Recorrer todas las propiedades del objeto
        // La etiqueta <br> no se recomienda pero se hace para añadir saltos de línea y ahorrar código
        for (let key in obj) {
            // Si la propiedad es un objeto (como stats)
            if (typeof obj[key] == "object") {
                output.innerHTML += `<br>Propiedad "${key}" es un objeto con los siguientes valores:`;
                for (let subKey in obj[key]) {
                    output.innerHTML += `<br>${subKey}: ${obj[key][subKey]}`;
                }
            } else {
                // Si no es un objeto, mostrar su valor directamente
                output.innerHTML += `<br>${key}: ${obj[key]}`;
            }
        }
    }


    // Incrementar número de posts y followers
    alumno.stats.posts += 2;
    alumno.stats.followers += 3;

    // Cambiamos la propiedad "admin"
    alumno.admin = true;

    let output = document.getElementById("output");
    output.innerHTML += `Propiedad admin (después del cambio): ${alumno.admin}`; // true

    // Quitar propiedad admin
    delete alumno.admin;

    // Mostramos el objeto por pantalla
    // Las etiquetas <br> y <b> deberían reemplazarse con CSS pero en este caso se ahorra código
    output.innerHTML += "<br><br><b>Recorriendo el objeto alumno después de eliminar admin:</b>";
    mostrarObjeto(alumno);

    // Clonamos objeto 
    // No se puede clonar con "structuredClone" porque hay una propiedad del tipo función
    // Lo más parecido es assign, pero no clona objetos
    let alumno2 = Object.assign({}, alumno);

    // Podemos llamar a "structuredClone" para el objeto al completo o para el objeto stats
    alumno2 = structuredClone(alumno);
    //alumno2.stats = structuredClone(alumno.stats);

    // Mostramos el resultado por pantalla
    alumno2.incrementarStats("post", 5);
    output.innerHTML += "<br><br><b>Recorriendo el objeto original</b>:";
    mostrarObjeto(alumno);
    output.innerHTML += "<br><b>Ahora el objeto clonado</b>:";
    mostrarObjeto(alumno2);




</script>

</html>